apiVersion: v1
kind: Secret
metadata:
  name: vaultwarden-secrets
  namespace: {{ .Release.Namespace }}
type: Opaque
stringData:
  # Database
  DATABASE_URL: "postgresql://{{ .Values.postgresql.username }}:{{ .Values.postgresql.password }}@{{ .Values.postgresql.host }}:{{ .Values.postgresql.port }}/{{ .Values.postgresql.database }}"

  # Admin token (for access to admin panel)
  ADMIN_TOKEN: "changeme"

  # Domain
  DOMAIN: {{ .Values.vaultwarden.config.domain }}

  # Log level
  LOG_LEVEL: {{ .Values.vaultwarden.config.logLevel }}

  {{- if .Values.vaultwarden.config.email.enabled }}
  # Email configuration
  MAIL_FROM: {{ .Values.vaultwarden.config.email.from }}
  MAIL_FROM_NAME: {{ .Values.vaultwarden.config.email.fromName }}
  MAIL_HOST: {{ .Values.vaultwarden.config.email.host }}
  MAIL_PORT: "{{ .Values.vaultwarden.config.email.port }}"
  MAIL_SECURITY: "starttls"
  MAIL_USERNAME: {{ .Values.vaultwarden.config.email.username }}
  MAIL_PASSWORD: {{ .Values.vaultwarden.config.email.password }}
  {{- end }}
