namespace: db

create:
  namespace: true

replicaCount: 1
mode: standalone  # or distributed

image:
  repository: minio/minio
  pullPolicy: IfNotPresent
  tag: "2024.1.0"

# push into secrets
minioConfig:
  accessKey: minioadmin
  secretKey: minioadmin
  rootUser: minioadmin
  rootPassword: minioadmin

service:
  type: ClusterIP
  port: 9000
  targetPort: 9000
  console:
    port: 9001
    targetPort: 9001

persistence:
  enabled: true
  storageClass: standard # or openebs-hostpath
  accessMode: ReadWriteOnce
  size: 1Gi
  mountPath: /data

ingress:
  enabled: true
  className: traefik
  annotations:
    traefik.ingress.kubernetes.io/router.entrypoints: web,websecure
  hosts:
    - host: minio.localhost
      paths:
        - path: /
          pathType: Prefix
    - host: minio-console.localhost
      paths:
        - path: /
          pathType: Prefix
  tls:
    enabled: true
    secretName: minio-tls

resources:
  limits:
    cpu: 1000m
    memory: 1Gi
  requests:
    cpu: 500m
    memory: 512Mi

securityContext:
  runAsUser: 1000
  runAsGroup: 1000
  fsGroup: 1000

env:
  MINIO_BROWSER: "on"
  MINIO_DOMAIN: minio.localhost

buckets:
  - name: data
    policy: none
  - name: logs
    policy: none
  - name: backups
    policy: none

# Consul integration
consul:
  enabled: true
  host: "consul.consul.svc.cluster.local"
  port: 8500
  datacenter: dc1
  tags:
    - minio
    - s3
    - storage
