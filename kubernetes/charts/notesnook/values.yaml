namespace: notesnook

# MongoDB (external)
mongodb:
  external: true
  host: "mongo.code.svc.cluster.local" # or DNS name of MongoDB
  port: 27017
  replicaSet: "rs0"
  database: "notesnook"
  # for authentication:
  # username: "mongouser"
  # password: "mongopass"

# MinIO (external)
minio:
  external: true
  endpoint: "http://minio.code.svc.cluster.local:9000" # or DNS name of MongoDB
  accessKey: "minioadmin"
  secretKey: "minioadmin"
  bucketName: "attachments"
  useSSL: false

# Consul (external)
consul:
  enabled: true
  host: "consul.consul.svc.cluster.local"
  port: 8500
  datacenter: "dc1"
  tags:
    - "notesnook"
    - "backend"
    - "production"

# Identity Server
identityServer:
  image: streetwriters/identity:latest
  replicaCount: 1
  service:
    port: 8011
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi

# Notesnook Server
notesnookServer:
  image: streetwriters/notesnook-sync:latest
  replicaCount: 1
  service:
    port: 8010
  resources:
    limits:
      cpu: 1000m
      memory: 1Gi
    requests:
      cpu: 500m
      memory: 512Mi

# SSE Server (for real-time connection)
sseServer:
  image: streetwriters/sse:v1.0-beta.1
  replicaCount: 1
  service:
    port: 8012
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi

# Ingress through Traefik
ingress:
  enabled: true
  className: traefik
  annotations:
    traefik.ingress.kubernetes.io/router.entrypoints: web,websecure
  hosts:
    - host: notesnook.local
      service: notesnook-server
      port: 8010
    - host: identity.notesnook.local
      service: identity-server
      port: 8011
    - host: sse.notesnook.local
      service: sse-server
      port: 8012
  tls:
    enabled: true
    secretName: notesnook-tls

# envs
environment:
  INSTANCE_NAME: "notesnook-instance"
  NOTESNOOK_API_SECRET: "replace-with-a-long-random-string"
  DISABLE_ACCOUNT_CREATION: "0"
  NOTESNOOK_APP_PUBLIC_URL: "http://notesnook.local"
  AUTH_SERVER_PUBLIC_URL: "http://identity.notesnook.local"
  ATTACHMENTS_SERVER_PUBLIC_URL: "http://sse.notesnook.local"

# SMTP
smtp:
  enabled: false
  username: "your-email@example.com"
  password: "your-smtp-password"
  host: "smtp.gmail.com"
  port: "465"
  senderEmail: "your-email@example.com"
  replyToEmail: "your-email@example.com"
