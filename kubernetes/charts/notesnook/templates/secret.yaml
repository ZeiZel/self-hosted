apiVersion: v1
kind: Secret
metadata:
  name: notesnook-env
  namespace: {{ .Values.namespace }}
type: Opaque
stringData:
  INSTANCE_NAME: {{ .Values.environment.INSTANCE_NAME }}
  NOTESNOOK_API_SECRET: {{ .Values.environment.NOTESNOOK_API_SECRET }}
  DISABLE_ACCOUNT_CREATION: {{ .Values.environment.DISABLE_ACCOUNT_CREATION | quote }}
  NOTESNOOK_APP_PUBLIC_URL: {{ .Values.environment.NOTESNOOK_APP_PUBLIC_URL }}
  AUTH_SERVER_PUBLIC_URL: {{ .Values.environment.AUTH_SERVER_PUBLIC_URL }}
  ATTACHMENTS_SERVER_PUBLIC_URL: {{ .Values.environment.ATTACHMENTS_SERVER_PUBLIC_URL }}
  {{- if .Values.smtp.enabled }}
  SMTP_USERNAME: {{ .Values.smtp.username }}
  SMTP_PASSWORD: {{ .Values.smtp.password }}
  SMTP_HOST: {{ .Values.smtp.host }}
  SMTP_PORT: {{ .Values.smtp.port | quote }}
  NOTESNOOK_SENDER_EMAIL: {{ .Values.smtp.senderEmail }}
  SMTP_REPLYTO_EMAIL: {{ .Values.smtp.replyToEmail }}
  {{- end }}
  SELF_HOSTED: "1"
  NOTESNOOK_SERVER_HOST: notesnook-server
  NOTESNOOK_SERVER_PORT: "8010"
  IDENTITY_SERVER_HOST: identity-server
  IDENTITY_SERVER_PORT: "8011"
  SSE_SERVER_HOST: sse-server
  SSE_SERVER_PORT: "8012"

  # Внешний MinIO
  S3_ENDPOINT: {{ .Values.minio.endpoint }}
  S3_ACCESS_KEY: {{ .Values.minio.accessKey }}
  S3_SECRET_KEY: {{ .Values.minio.secretKey }}
  S3_BUCKET_NAME: {{ .Values.minio.bucketName }}
  S3_USE_SSL: {{ .Values.minio.useSSL | quote }}

  # Внешний MongoDB (для Identity Server)
  MONGODB_CONNECTION_STRING: "mongodb://{{ .Values.mongodb.host }}:{{ .Values.mongodb.port }}/identity?replSet={{ .Values.mongodb.replicaSet }}"
  MONGODB_DATABASE_NAME: "identity"
