# Namespace
namespace: service

create:
  namespace: true

# Dashy Image
image:
  repository: lissy93/dashy
  tag: "3.1.1"
  pullPolicy: IfNotPresent

# Dashy Server конфигурация
dashy:
  replicaCount: 1

  service:
    type: ClusterIP
    port: 80

  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi

  # Конфигурация Dashy
  config:
    # Page meta info
    pageInfo:
      title: "My Dashboard"
      description: "Welcome to your dashboard!"
      navLinks:
        - title: "GitHub"
          path: "https://github.com/Lissy93/dashy"

    # App settings
    appConfig:
      theme: "colorful"
      layout: "auto"
      iconSize: "medium"
      language: "en"
      startingView: "default"
      defaultOpeningMethod: "newtab"
      statusCheck: true
      statusCheckInterval: 60
      faviconApi: "google"
      enableMultiTasking: true
      allowConfigEdit: true
      enableServiceWorker: true
      disableConfiguration: false
      hideComponents:
        hideHeading: false
        hideNav: false
        hideSearch: false
        hideSettings: false
        hideFooter: false

    # Sections with items
    sections:
      - name: "System Stats"
        icon: "fas fa-tachometer-alt"
        widgets:
          - type: "gl-current-cpu"
            options:
              hostname: "localhost"
          - type: "gl-current-mem"
            options:
              hostname: "localhost"
          - type: "gl-disk-space"
            options:
              hostname: "localhost"
      - name: "Services"
        icon: "fas fa-rocket"
        items:
          - title: "GitLab"
            description: "Git repository management"
            icon: "hl-gitlab"
            url: "http://gitlab.local"
            target: "newtab"
            statusCheck: true

          - title: "YouTrack"
            description: "Issue tracking"
            icon: "hl-youtrack"
            url: "http://youtrack.local"
            target: "newtab"
            statusCheck: true

          - title: "Grafana"
            description: "Monitoring dashboard"
            icon: "hl-grafana"
            url: "http://grafana.local"
            target: "newtab"
            statusCheck: true

# Persistent Storage
persistence:
  enabled: true
  storageClass: standard

  # Config directory
  config:
    enabled: true
    size: 5Gi
    mountPath: /app/public
    accessMode: ReadWriteOnce

# Ingress через Traefik
ingress:
  enabled: true
  className: traefik
  annotations:
    traefik.ingress.kubernetes.io/router.entrypoints: web,websecure
    traefik.ingress.kubernetes.io/router.tls: "true"
  certManager:
    issuer: ca-issuer
  host: dashy.localhost
  path: /

  tls:
    enabled: true
    secretName: dashy-tls

# Consul интеграция
consul:
  enabled: true
  host: "consul.consul.svc.cluster.local"
  port: 8500
  datacenter: dc1
  tags:
    - dashy
    - dashboard

# Security
securityContext:
  runAsUser: 1000
  runAsGroup: 1000
  fsGroup: 1000

# Health Checks
probes:
  liveness:
    enabled: true
    path: "/"
    initialDelaySeconds: 30
    periodSeconds: 10
  readiness:
    enabled: true
    path: "/"
    initialDelaySeconds: 10
    periodSeconds: 5

# Vault integration (requires Vault policies and secrets to be configured)
vault:
  enabled: false
  # Note: Before enabling, configure Vault:
  # 1. Create policy for dashy service
  # 2. Create secret at secret/data/dashy/secrets
  # 3. Enable Kubernetes auth method in Vault
  # 4. Create role binding ServiceAccount to Vault policy
  # See: kubernetes/docs/VAULT_MIGRATION.md

# Authentication (опционально через Traefik ForwardAuth)
auth:
  enabled: false
  # Если используется Authentik:
  # forwardAuth:
  #   address: "http://authentik.authentik.svc.cluster.local/outpost.goauthentik.io/auth/traefik"
