global:
  edition: ce
  hosts:
    domain: gitlab.local                  # ваш домен
    externalIP: ""                        # при необходимости
    https: true
  ingress:
    enabled: true
    class: traefik                       # ingress-класс Traefik
    configureCertmanager: false          # отключить cert-manager, управлять TLS самим
    tls:
      enabled: true
      secretName: gitlab-tls             # TLS секрет в Kubernetes с сертификатом

certmanager:
  install: false                        # если TLS настроен самим

gitlab:
  webservice:
    ingress:
      enabled: true
      hosts:
        - gitlab.local
      className: traefik
      tls:
        enabled: true
        secretName: gitlab-tls
    service:
      type: ClusterIP
      port: 8080

  sidekiq:
    enabled: true

  gitaly:
    enabled: true

  task-runner:
    enabled: true

  unicorn:
    enabled: true

  puma:
    enabled: false

  prometheus:
    install: false

  minio:
    enabled: false

  registry:
    enabled: true
    ingress:
      enabled: true
      hosts:
        - registry.gitlab.local
      className: traefik
      tls:
        enabled: true
        secretName: gitlab-tls

postgresql:
  install: true
  # Пример PVC для Postgres
  persistence:
    enabled: true
    storageClass: standard
    size: 8Gi

redis:
  install: true
  persistence:
    enabled: true
    storageClass: standard
    size: 4Gi

# PVC для GitLab (репозиториев, артефактов и т.д.)
persistence:
  enabled: true
  storageClass: standard
  accessMode: ReadWriteOnce
  size: 20Gi
