apiVersion: v1
kind: Secret
metadata:
  name: gitlab-secrets
  namespace: {{ .Values.namespace }}
type: Opaque
stringData:
  # PostgreSQL
  POSTGRES_HOST: {{ .Values.postgresql.host }}
  POSTGRES_PORT: "{{ .Values.postgresql.port }}"
  POSTGRES_USER: {{ .Values.postgresql.username }}
  POSTGRES_PASSWORD: {{ .Values.postgresql.password }}
  POSTGRES_DB: {{ .Values.postgresql.database }}

  # Redis
  REDIS_HOST: {{ .Values.redis.host }}
  REDIS_PORT: "{{ .Values.redis.port }}"
  REDIS_PASSWORD: {{ .Values.redis.password | quote }}
  REDIS_DB: "{{ .Values.redis.database }}"

  # S3/MinIO
  AWS_S3_ENDPOINT: {{ .Values.objectStorage.endpoint }}
  AWS_S3_REGION: {{ .Values.objectStorage.region }}
  AWS_ACCESS_KEY_ID: {{ .Values.objectStorage.accessKey }}
  AWS_SECRET_ACCESS_KEY: {{ .Values.objectStorage.secretKey }}
  AWS_S3_BUCKET: {{ .Values.objectStorage.bucket }}

  # SMTP
  SMTP_ADDRESS: {{ .Values.gitlab.config.smtp.address }}
  SMTP_PORT: "{{ .Values.gitlab.config.smtp.port }}"
  SMTP_USER: {{ .Values.gitlab.config.smtp.user_name }}
  SMTP_PASSWORD: {{ .Values.gitlab.config.smtp.password }}
