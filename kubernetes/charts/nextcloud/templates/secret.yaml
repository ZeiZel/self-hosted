apiVersion: v1
kind: Secret
metadata:
  name: nextcloud-secrets
  namespace: {{ .Release.Namespace }}
type: Opaque
stringData:
  # Admin
  NEXTCLOUD_ADMIN_USERNAME: {{ .Values.nextcloud.admin.user }}
  NEXTCLOUD_ADMIN_PASSWORD: {{ .Values.nextcloud.admin.password }}

  # Database
  NEXTCLOUD_DB_TYPE: "pgsql"
  NEXTCLOUD_DB_HOST: {{ .Values.postgresql.host }}
  NEXTCLOUD_DB_PORT: "{{ .Values.postgresql.port }}"
  NEXTCLOUD_DB_NAME: {{ .Values.postgresql.database }}
  NEXTCLOUD_DB_USER: {{ .Values.postgresql.username }}
  NEXTCLOUD_DB_PASSWORD: {{ .Values.postgresql.password }}

  # Redis
  NEXTCLOUD_REDIS_ENABLED: "true"
  NEXTCLOUD_REDIS_HOST: {{ .Values.redis.host }}
  NEXTCLOUD_REDIS_PORT: "{{ .Values.redis.port }}"
  NEXTCLOUD_REDIS_DB: "{{ .Values.redis.database }}"
  {{- if .Values.redis.password }}
  NEXTCLOUD_REDIS_PASSWORD: {{ .Values.redis.password }}
  {{- end }}

