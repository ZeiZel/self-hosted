namespace: infrastructure

create:
  namespace: true

# Glance Image
image:
  repository: zurdi15/glance
  tag: "latest"
  pullPolicy: IfNotPresent

# Glance Server конфигурация
glance:
  replicaCount: 1

  service:
    type: ClusterIP
    port: 80

  config:
    pageInfo:
      title: "Home Center Dashboard"
      description: "Self-hosted infrastructure dashboard"
      navLinks:
        - title: "GitHub"
          path: "https://github.com"
        - title: "Documentation"
          path: "https://docs.example.com"

    appConfig:
      theme: "dark"
      layout: "auto"
      iconSize: "medium"
      language: "en"
      startingView: "default"
      defaultOpeningMethod: "newTab"
      statusCheck: true
      statusCheckInterval: 300
      faviconApi: "https://favicon.io"
      enableMultiTasking: true
      allowConfigEdit: true
      enableServiceWorker: true
      disableConfiguration: false

      hideComponents:
        hideHeading: false
        hideNav: false
        hideSearch: false
        hideSettings: false
        hideFooter: false

    sections:
      - name: "Infrastructure"
        items:
          - title: "Kubernetes Dashboard"
            description: "Devtron Dashboard"
            icon: "fa fa-cube"
            url: "http://devtron.local"
          - title: "Monitoring"
            description: "Grafana"
            icon: "fa fa-chart-line"
            url: "http://grafana.local"

# Resources
resources:
  limits:
    cpu: 300m
    memory: 256Mi
  requests:
    cpu: 50m
    memory: 64Mi

# Persistence
persistence:
  config:
    enabled: true
    storageClass: standard
    accessMode: ReadWriteOnce
    size: 1Gi
    mountPath: /app/user-data

# Ingress
ingress:
  enabled: true
  className: traefik
  host: glance.localhost
  annotations: {}
  tls:
    enabled: true
    secretName: glance-tls

# Security Context
securityContext:
  runAsUser: 1000
  runAsGroup: 1000
  fsGroup: 1000

# Probes
probes:
  liveness:
    enabled: true
    path: /
    initialDelaySeconds: 30
    periodSeconds: 10
  readiness:
    enabled: true
    path: /
    initialDelaySeconds: 10
    periodSeconds: 5

# Consul integration
consul:
  enabled: true
  tags:
    - glance
    - dashboard
    - infrastructure

# Vault integration (requires Vault policies and secrets to be configured)
# Authentik integration (ForwardAuth via Traefik)
authentik:
  enabled: false
  middleware: "service-authentik-forward-auth@kubernetescrd"
  host: "https://authentik.local"
  outpostPath: "/outpost.goauthentik.io/auth/traefik"

vault:
  enabled: false
  # Note: Before enabling, configure Vault:
  # 1. Create policy for glance service
  # 2. Create secret at secret/data/glance/secrets
  # 3. Enable Kubernetes auth method in Vault
  # 4. Create role binding ServiceAccount to Vault policy
  # See: kubernetes/docs/VAULT_MIGRATION.md


# Network Policy
networkPolicy:
  enabled: true
  egressRules:
    allowDatabases: false
    allowConsul: true
    allowVault: true
    allowAuthentik: false
  ingress: []
  egress: []

# Service Account
serviceAccount:
  create: true
  automountServiceAccountToken: true
  annotations: {}
  name: ""

# RBAC
rbac:
  create: true
  allowSecrets: false
  rules: []

# Metrics
metrics:
  enabled: true
  port: "metrics"
  path: "/metrics"
  interval: "30s"
  scrapeTimeout: "10s"

# Pod Disruption Budget
podDisruptionBudget:
  enabled: false
  minAvailable: 1
  # maxUnavailable: 1
