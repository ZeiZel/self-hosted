apps:
  # BASE

  namespaces:
    repo: charts
    chart: namespaces
    namespace: default
    version: v1.0.0

  # EXTERNAL

  traefik:
    repo: traefik
    chart: traefik
    namespace: ingress
    version: v37.2.0
    createNamespace: true

  cert-manager:
    repo: jetstack
    chart: cert-manager
    version: v1.19.1
    namespace: service
    needs:
      - service/vault

  penpot:
    repo: penpot
    chart: penpot
    namespace: productivity
    version: v0.28.0
    needs:
      - ingress/traefik
      - service/consul
      - service/vault

  # DATABASES
  # Bitnami database charts - pinned to specific versions for stability
  # Update versions periodically: helm search repo bitnami/<chart> --versions
  valkey:
    repo: bitnami
    chart: valkey
    namespace: db
    version: "2.3.2"  # Pinned Feb 2026
    needs:
      - ingress/traefik
      - service/vault

  postgres:
    repo: bitnami
    chart: postgresql
    namespace: db
    version: "16.4.7"  # Pinned Feb 2026 (PostgreSQL 16.x)
    needs:
      - ingress/traefik
      - service/vault

  minio:
    repo: bitnami
    chart: minio
    namespace: db
    version: "15.0.4"  # Pinned Feb 2026
    needs:
      - ingress/traefik
      - service/vault

  mongodb:
    repo: bitnami
    chart: mongodb
    namespace: db
    version: "16.4.4"  # Pinned Feb 2026 (MongoDB 7.x)
    needs:
      - ingress/traefik
      - service/vault

  rabbitmq:
    repo: bitnami
    chart: rabbitmq
    namespace: db
    version: "15.2.4"  # Pinned Feb 2026
    needs:
      - ingress/traefik
      - service/vault

  clickhouse:
    repo: bitnami
    chart: clickhouse
    namespace: db
    version: "7.1.2"  # Pinned Feb 2026
    needs:
      - ingress/traefik
      - service/vault

  mysql:
    repo: bitnami
    chart: mysql
    namespace: db
    version: "12.2.2"  # Pinned Feb 2026 (MySQL 8.x)
    needs:
      - ingress/traefik
      - service/vault

  supabase:
    repo: charts
    chart: supabase
    namespace: db
    version: "v1.0.0"  # Custom chart
    needs:
      - db/postgres
      - db/minio
      - db/valkey
      - ingress/traefik
      - service/vault

  # SERVICES

  consul:
    repo: hashicorp
    chart: consul
    version: "1.6.2"  # Pinned Feb 2026
    namespace: service
    needs:
      - ingress/traefik

  vault:
    repo: charts
    chart: vault
    namespace: service
    version: v1.0.0
    needs:
      - ingress/traefik
      - service/consul

  monitoring:
    repo: charts
    chart: monitoring
    version: v1.0.0
    namespace: service
    needs:
      - ingress/traefik
      - service/consul
      - service/vault

  logging:
    repo: charts
    chart: logging
    version: v1.0.0
    namespace: service
    needs:
      - ingress/traefik
      - service/consul
      - service/vault
      - service/authentik
      - service/monitoring

  glance:
    repo: charts
    chart: glance
    namespace: infrastructure
    version: v1.0.0
    needs:
      - ingress/traefik
      - service/consul
      - service/vault

  devtron:
    repo: devtron
    chart: devtron
    namespace: devtroncd
    version: v1.0.0
    needs:
      - ingress/traefik
      - db/postgres
      - service/vault

  bytebase:
    repo: charts
    chart: bytebase
    namespace: infrastructure
    version: v1.0.0
    needs:
      - ingress/traefik
      - service/consul
      - db/postgres
      - service/vault

  harbor:
    repo: charts
    chart: harbor
    namespace: infrastructure
    version: v1.0.0
    needs:
      - ingress/traefik
      - db/postgres
      - db/valkey
      - service/vault

  pangolin:
    repo: charts
    chart: pangolin
    namespace: infrastructure
    version: v1.0.0
    needs:
      - service/consul
      - service/vault

  authentik:
    repo: authentik
    chart: authentik
    namespace: service
    version: "2024.12.3"  # Pinned Feb 2026
    needs:
      - ingress/traefik
      - service/consul
      - db/postgres
      - db/valkey
      - service/vault

  # PRODUCTIVITY
  notesnook:
    repo: charts
    chart: notesnook
    namespace: productivity
    version: v1.0.0
    needs:
      - ingress/traefik
      - service/consul
      - service/vault

  excalidraw:
    repo: charts
    chart: excalidraw
    namespace: productivity
    version: v1.0.0
    needs:
      - ingress/traefik
      - service/consul
      - service/vault

  affine:
    repo: charts
    chart: affine
    namespace: productivity
    version: v1.0.0
    needs:
      - ingress/traefik
      - service/consul
      - db/postgres
      - db/valkey
      - db/minio
      - service/vault

  # CODE (JetBrains + GitLab)
  hub:
    repo: charts
    chart: hub
    namespace: code
    version: v1.0.0
    needs:
      - ingress/traefik
      - service/consul
      - db/postgres
      - service/vault

  youtrack:
    repo: charts
    chart: youtrack
    namespace: code
    version: v1.0.0
    needs:
      - ingress/traefik
      - service/consul
      - code/hub
      - db/postgres
      - service/vault

  teamcity:
    repo: charts
    chart: teamcity
    namespace: code
    version: v1.0.0
    needs:
      - ingress/traefik
      - service/consul
      - db/postgres
      - service/vault

  gitlab:
    repo: gitlab
    chart: gitlab
    namespace: code
    version: "8.8.2"  # Pinned Feb 2026 (GitLab 17.x)
    needs:
      - ingress/traefik
      - service/consul
      - db/postgres
      - db/valkey
      - service/vault

  coder:
    repo: charts
    chart: coder
    namespace: code
    version: v1.0.0
    needs:
      - ingress/traefik
      - service/consul
      - service/cert-manager
      - service/authentik
      - db/postgres
      - service/vault
      - code/gitlab

  # SOCIAL
  stoat:
    repo: charts
    chart: stoat
    namespace: social
    version: v1.0.0
    needs:
      - ingress/traefik
      - service/consul
      - db/valkey
      - db/mongodb
      - db/minio
      - db/rabbitmq
      - service/authentik
      - service/vault
      - social/stalwart

  stalwart:
    repo: charts
    chart: stalwart
    namespace: social
    version: v1.0.0
    needs:
      - ingress/traefik
      - service/consul
      - service/authentik
      - service/vault

  # DATA
  vaultwarden:
    repo: charts
    chart: vaultwarden
    namespace: data
    version: v1.0.0
    needs:
      - ingress/traefik
      - service/consul
      - db/postgres
      - service/vault

  syncthing:
    repo: charts
    chart: syncthing
    namespace: data
    version: v1.0.0
    needs:
      - ingress/traefik
      - service/consul
      - service/vault

  nextcloud:
    repo: charts
    chart: nextcloud
    namespace: data
    version: v1.0.0
    needs:
      - ingress/traefik
      - service/consul
      - db/postgres
      - db/valkey
      - service/vault

  rybbit:
    repo: charts
    chart: rybbit
    namespace: data
    version: v1.0.0
    needs:
      - ingress/traefik
      - service/consul
      - db/postgres
      - db/clickhouse
      - service/vault

  # INFRASTRUCTURE
  remnawave:
    repo: charts
    chart: remnawave
    namespace: infrastructure
    version: v1.0.0
    needs:
      - ingress/traefik
      - service/consul
      - service/cert-manager
      - service/authentik
      - db/postgres
      - db/valkey
      - service/vault

  # UTILITIES
  vert:
    repo: charts
    chart: vert
    namespace: utilities
    version: v1.0.0
    needs:
      - ingress/traefik
      - service/consul

  metube:
    repo: charts
    chart: metube
    namespace: utilities
    version: v1.0.0
    needs:
      - ingress/traefik
      - service/consul

  # AUTOMATION
  kestra:
    repo: kestra
    chart: kestra
    namespace: automation
    version: "0.22.0"  # Pinned Feb 2026
    needs:
      - ingress/traefik
      - service/consul
      - service/cert-manager
      - service/authentik
      - db/postgres
      - db/minio
      - service/vault

  n8n:
    repo: n8n
    chart: n8n
    namespace: automation
    version: "1.0.0"  # Pinned Feb 2026
    needs:
      - ingress/traefik
      - service/consul
      - service/cert-manager
      - service/authentik
      - db/postgres
      - db/valkey
      - service/vault

  # CONTENT
  ghost:
    repo: charts
    chart: ghost
    namespace: content
    version: v1.0.0
    needs:
      - ingress/traefik
      - service/consul
      - service/cert-manager
      - service/authentik
      - db/mysql
      - service/vault
