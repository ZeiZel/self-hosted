---
- name: Ensure Homebrew is in PATH
  set_fact:
    brew_command: "{{ homebrew_install_path }}/bin/brew"

- name: Install dependencies via Homebrew
  community.general.homebrew:
    name: "{{ dependency.name }}"
    state: present
    path: "{{ homebrew_install_path }}/bin"
  loop: "{{ setup_host_tools }}"
  loop_control:
    loop_var: dependency

- name: Install Python packages required for Ansible
  pip:
    name: "{{ setup_host_python_packages }}"
    state: present
    break_system_packages: true
