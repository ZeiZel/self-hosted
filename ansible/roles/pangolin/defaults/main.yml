---
# Pangolin VPN role defaults
# These can be overridden in group_vars/all/vars.yml

# Pangolin mode: 'gateway' (VPS server) or 'node' (cluster client)
pangolin_mode: "node"

# Version pinning
pangolin_version: "1.15.0"
gerbil_version: "1.3.0"
traefik_version: "v3.4.0"
newt_version: "1.2.0"

# Installation paths
pangolin_install_dir: "/opt/pangolin"
pangolin_config_dir: "/etc/pangolin"
traefik_config_dir: "/etc/traefik"

# WireGuard network configuration
wireguard_network: "10.99.0.0/24"
wireguard_server_ip: "10.99.0.1"
wireguard_port: 51820
wireguard_interface: "wg0"

# Gateway-specific (VPS server)
pangolin_gateway_public_ip: "{{ ansible_default_ipv4.address }}"
pangolin_gateway_endpoint: "{{ pangolin_gateway_public_ip }}:{{ wireguard_port }}"

# Traefik edge router
traefik_http_port: 80
traefik_https_port: 443
traefik_dashboard_port: 8080

# Node-specific (cluster clients)
pangolin_node_ip_prefix: "10.99.0"  # Node IPs will be 10.99.0.10, 10.99.0.11, etc.

# Firewall configuration
firewall_allowed_tcp_ports:
  - "{{ ssh.port | default(22) }}"
  - "{{ traefik_http_port }}"
  - "{{ traefik_https_port }}"
firewall_allowed_udp_ports:
  - "{{ wireguard_port }}"
  - 21820  # WireGuard alt port

# System configuration
sysctl_config:
  net.ipv4.ip_forward: 1
  net.ipv4.conf.all.src_valid_mark: 1
  net.ipv6.conf.all.forwarding: 1

# Binary download URLs
pangolin_server_url: "https://github.com/lvlcn-t/pangolin/releases/download/v{{ pangolin_version }}/pangolin_Linux_x86_64.tar.gz"
gerbil_url: "https://github.com/lvlcn-t/gerbil/releases/download/v{{ gerbil_version }}/gerbil_Linux_x86_64.tar.gz"
traefik_url: "https://github.com/traefik/traefik/releases/download/{{ traefik_version }}/traefik_{{ traefik_version }}_linux_amd64.tar.gz"
newt_url: "https://github.com/lvlcn-t/newt/releases/download/v{{ newt_version }}/newt_Linux_x86_64.tar.gz"
