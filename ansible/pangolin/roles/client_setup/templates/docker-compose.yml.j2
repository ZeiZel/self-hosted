services:
  pangolin-client:
    image: fosrl/pangolin:{{ pangolin_version | default('latest') }}
    container_name: pangolin-client
    restart: unless-stopped
    volumes:
      - ./config:/app/config
      - pangolin-client-data:/var/certificates
    environment:
      - PANGOLIN_SERVER_URL=https://{{ pangolin_server_endpoint }}
      - PANGOLIN_CLIENT_NAME={{ inventory_hostname }}
    ports:
      - "{{ pangolin_client_port | default(3001) }}:3001"
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3001/api/v1/"]
      interval: "30s"
      timeout: "10s"
      retries: 3

volumes:
  pangolin-client-data:





