---

# https://github.com/dani-garcia/vaultwarden

services:
  vaultwarden:
    image: vaultwarden/server:latest
    container_name: vaultwarden
    restart: unless-stopped
    environment:
      - DOMAIN=https://${VAULTWARDEN_HOSTNAME}.${CORE_DOMAIN}
      - SIGNUPS_ALLOWED=${SIGNUPS_ALLOWED}
      - WEBSOCKET_ENABLED=${WEBSOCKET_ENABLED}
      - ADMIN_TOKEN=${ADMIN_TOKEN}
      - DATABASE_URL=postgres://${PG_LOGIN}:${PG_PASS}@postgres:${PG_PORT}/${VW_PG_NAME}
      - SMTP_HOST=${SMTP_HOST}
      - SMTP_FROM=${SMTP_FROM}
      - SMTP_PORT=${SMTP_PORT}
    volumes:
      - ${PWD}/volumes/vaultwarden/data:/data
    depends_on:
      - postgres
      - smtp
    networks:
      - shared-net
