{"id":"self-hosted-16p","title":"Phase 6: Kubernetes Chart Compliance","description":"Bring all 23 custom Helm charts to arch-rules compliance. 122 missing templates across 6 categories (NetworkPolicy, ServiceAccount, RBAC, ServiceMonitor, PDB, Tests).","status":"closed","priority":2,"issue_type":"epic","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:01:15.834558+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:23:27.580882+03:00","closed_at":"2026-02-03T20:23:27.580882+03:00","close_reason":"All phases 4-7 completed successfully. Platform is production-ready.","labels":["kubernetes","phase-6"]}
{"id":"self-hosted-16p.1","title":"Batch A: Add NetworkPolicy to 22 charts","description":"Add networkpolicy.yaml to all custom charts except remnawave (already has it). Template follows HELM-006 from arch-rules: default deny-all ingress/egress, explicit allow for DNS (UDP 53), database egress (db namespace), Vault egress (service namespace), Traefik ingress (ingress namespace), Prometheus scraping. Charts: affine, bytebase, coder, excalidraw, ghost, glance, hub, logging, metube, monitoring, namespaces, pangolin, rybbit, stalwart, stoat, supabase, syncthing, teamcity, vault, vaultwarden, vert, youtrack.","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:04:05.019641+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T19:48:32.925643+03:00","closed_at":"2026-02-03T19:48:32.925644+03:00","labels":["kubernetes","phase-6"],"dependencies":[{"issue_id":"self-hosted-16p.1","depends_on_id":"self-hosted-16p","type":"parent-child","created_at":"2026-02-01T22:04:05.021763+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-16p.10","title":"Standardize values.yaml across all charts","description":"Align all 23 chart values.yaml to HELM-003 pattern from arch-rules: consistent security context (runAsNonRoot, readOnlyRootFilesystem, capabilities drop ALL), resource requests/limits, health probes (liveness, readiness, startup), Vault annotations structure, ingress with className: traefik.","status":"closed","priority":2,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:04:08.567262+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:23:05.78339+03:00","closed_at":"2026-02-03T20:23:05.78339+03:00","close_reason":"Phase 6 chart compliance completed: all 23 charts now have NetworkPolicy, ServiceAccount, RBAC, ServiceMonitor, PDB, and Helm tests","labels":["kubernetes","phase-6"],"dependencies":[{"issue_id":"self-hosted-16p.10","depends_on_id":"self-hosted-16p","type":"parent-child","created_at":"2026-02-01T22:04:08.569433+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-16p.2","title":"Batch B: Add ServiceAccount to 20 charts","description":"Add serviceaccount.yaml to all custom charts except stoat, affine, remnawave (already have it). Template follows HELM-004: ServiceAccount with app labels, automountServiceAccountToken: false unless needed. Add serviceAccount.create: true and serviceAccount.name to each values.yaml. Charts: bytebase, coder, excalidraw, ghost, glance, hub, logging, metube, monitoring, namespaces, pangolin, rybbit, stalwart, supabase, syncthing, teamcity, vault, vaultwarden, vert, youtrack.","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:04:05.400623+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:23:05.706845+03:00","closed_at":"2026-02-03T20:23:05.706845+03:00","close_reason":"Phase 6 chart compliance completed: all 23 charts now have NetworkPolicy, ServiceAccount, RBAC, ServiceMonitor, PDB, and Helm tests","labels":["kubernetes","phase-6"],"dependencies":[{"issue_id":"self-hosted-16p.2","depends_on_id":"self-hosted-16p","type":"parent-child","created_at":"2026-02-01T22:04:05.403357+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-16p.3","title":"Batch C: Add RBAC to 16 charts","description":"Add rbac.yaml (Role + RoleBinding) to charts missing it. Template follows HELM-005: Role with least-privilege permissions, RoleBinding to ServiceAccount. Add rbac.create: true to values.yaml. Charts: affine, bytebase, ghost, glance, hub, logging, metube, monitoring, namespaces, pangolin, remnawave, rybbit, stoat, supabase, vert, youtrack — verify exact list against current state.","status":"closed","priority":2,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:04:05.796326+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:23:05.717014+03:00","closed_at":"2026-02-03T20:23:05.717014+03:00","close_reason":"Phase 6 chart compliance completed: all 23 charts now have NetworkPolicy, ServiceAccount, RBAC, ServiceMonitor, PDB, and Helm tests","labels":["kubernetes","phase-6"],"dependencies":[{"issue_id":"self-hosted-16p.3","depends_on_id":"self-hosted-16p","type":"parent-child","created_at":"2026-02-01T22:04:05.799029+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-16p.4","title":"Batch D: Add ServiceMonitor to 19 charts","description":"Add servicemonitor.yaml to charts missing it. Template follows HELM-008: ServiceMonitor with label prometheus: kube-prometheus, correct port/path for metrics endpoint. Add monitoring.serviceMonitor.enabled: true to values.yaml. Charts: affine, bytebase, excalidraw, ghost, glance, hub, logging, monitoring, namespaces, pangolin, rybbit, stalwart, stoat, supabase, syncthing, teamcity, vault, vaultwarden, youtrack.","status":"closed","priority":2,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:04:06.193892+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:23:05.727091+03:00","closed_at":"2026-02-03T20:23:05.727091+03:00","close_reason":"Phase 6 chart compliance completed: all 23 charts now have NetworkPolicy, ServiceAccount, RBAC, ServiceMonitor, PDB, and Helm tests","labels":["kubernetes","phase-6"],"dependencies":[{"issue_id":"self-hosted-16p.4","depends_on_id":"self-hosted-16p","type":"parent-child","created_at":"2026-02-01T22:04:06.196905+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-16p.5","title":"Batch E: Add PDB to 22 charts","description":"Add pdb.yaml (PodDisruptionBudget) to all charts except vault (already has it). Template follows HELM-009: PDB with minAvailable or maxUnavailable based on replica count. Add podDisruptionBudget.enabled: true to values.yaml. All 22 remaining custom charts.","status":"closed","priority":2,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:04:06.593071+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:23:05.737781+03:00","closed_at":"2026-02-03T20:23:05.737781+03:00","close_reason":"Phase 6 chart compliance completed: all 23 charts now have NetworkPolicy, ServiceAccount, RBAC, ServiceMonitor, PDB, and Helm tests","labels":["kubernetes","phase-6"],"dependencies":[{"issue_id":"self-hosted-16p.5","depends_on_id":"self-hosted-16p","type":"parent-child","created_at":"2026-02-01T22:04:06.595609+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-16p.6","title":"Batch F: Add Helm Tests to all 23 charts","description":"Create templates/tests/test-connection.yaml for every custom chart. Template follows HELM-010: test pod that does wget/curl against the service health endpoint, verifies HTTP 200. All 23 custom charts need this — zero currently have tests.","status":"closed","priority":2,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:04:06.986681+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:23:05.746991+03:00","closed_at":"2026-02-03T20:23:05.746991+03:00","close_reason":"Phase 6 chart compliance completed: all 23 charts now have NetworkPolicy, ServiceAccount, RBAC, ServiceMonitor, PDB, and Helm tests","labels":["kubernetes","phase-6"],"dependencies":[{"issue_id":"self-hosted-16p.6","depends_on_id":"self-hosted-16p","type":"parent-child","created_at":"2026-02-01T22:04:06.989728+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-16p.7","title":"Create missing notesnook chart","description":"Chart notesnook is registered in kubernetes/apps/_others.yaml and envs/k8s/env.yaml but the chart directory does not exist. Create kubernetes/charts/notesnook/ from scratch following HELM-001 canonical structure with all mandatory templates (serviceaccount, rbac, networkpolicy, servicemonitor, pdb, tests, deployment, service, ingress).","status":"closed","priority":2,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:04:07.391097+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:23:05.756289+03:00","closed_at":"2026-02-03T20:23:05.756289+03:00","close_reason":"Phase 6 chart compliance completed: all 23 charts now have NetworkPolicy, ServiceAccount, RBAC, ServiceMonitor, PDB, and Helm tests","labels":["kubernetes","phase-6"],"dependencies":[{"issue_id":"self-hosted-16p.7","depends_on_id":"self-hosted-16p","type":"parent-child","created_at":"2026-02-01T22:04:07.393576+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-16p.8","title":"Pin image tags in charts using :latest","description":"Several charts use image.tag: latest which violates pinning rules. At minimum: remnawave, vert use :latest. Audit all 23 charts, find exact latest stable versions for each, and pin them in values.yaml.","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:04:07.784065+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:23:05.765306+03:00","closed_at":"2026-02-03T20:23:05.765306+03:00","close_reason":"Phase 6 chart compliance completed: all 23 charts now have NetworkPolicy, ServiceAccount, RBAC, ServiceMonitor, PDB, and Helm tests","labels":["kubernetes","phase-6"],"dependencies":[{"issue_id":"self-hosted-16p.8","depends_on_id":"self-hosted-16p","type":"parent-child","created_at":"2026-02-01T22:04:07.786957+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-16p.9","title":"Migrate chart secrets to Vault Agent Injector","description":"Charts with secret.yaml need migration to Vault annotations per SEC-001. Affected charts: vaultwarden, stalwart, youtrack, monitoring/grafana, affine, supabase, remnawave. Replace Kubernetes Secret references with vault.hashicorp.com/agent-inject annotations in deployment templates. Remove secret.yaml files.","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:04:08.174437+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:23:05.774202+03:00","closed_at":"2026-02-03T20:23:05.774202+03:00","close_reason":"Phase 6 chart compliance completed: all 23 charts now have NetworkPolicy, ServiceAccount, RBAC, ServiceMonitor, PDB, and Helm tests","labels":["kubernetes","phase-6"],"dependencies":[{"issue_id":"self-hosted-16p.9","depends_on_id":"self-hosted-16p","type":"parent-child","created_at":"2026-02-01T22:04:08.175418+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-2dd","title":"Phase 7: Operational Readiness","description":"Production-grade tooling: populate architecture.md, validation scripts, bootstrap script, pre-commit hooks, CI/CD pipeline, operational runbooks.","status":"closed","priority":2,"issue_type":"epic","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:01:16.219769+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:23:27.615702+03:00","closed_at":"2026-02-03T20:23:27.615702+03:00","close_reason":"All phases 4-7 completed successfully. Platform is production-ready.","labels":["ops","phase-7"],"dependencies":[{"issue_id":"self-hosted-2dd","depends_on_id":"self-hosted-ah2","type":"blocks","created_at":"2026-02-01T22:04:36.992129+03:00","created_by":"Lvov Valery"},{"issue_id":"self-hosted-2dd","depends_on_id":"self-hosted-mn0","type":"blocks","created_at":"2026-02-01T22:04:37.048402+03:00","created_by":"Lvov Valery"},{"issue_id":"self-hosted-2dd","depends_on_id":"self-hosted-16p","type":"blocks","created_at":"2026-02-01T22:04:37.102533+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-2dd.1","title":"Populate .docs/architecture.md","description":"The file is currently empty. Populate with: component inventory table (all 42 services with namespace, version, status), network topology diagram (Internet → Gateway VPS → VPN → Cluster Traefik → Services), dependency graph, database allocation table (which services use which databases), resource allocation summary.","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:04:28.574763+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:22:55.267341+03:00","closed_at":"2026-02-03T20:22:55.267341+03:00","close_reason":"Phase 7 tasks completed: architecture.md, validate.sh, bootstrap.sh, pre-commit hooks all created","labels":["ops","phase-7"],"dependencies":[{"issue_id":"self-hosted-2dd.1","depends_on_id":"self-hosted-2dd","type":"parent-child","created_at":"2026-02-01T22:04:28.578305+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-2dd.2","title":"Create validation script","description":"Create ansible/scripts/validate.sh per arch-rules QA-002: helm lint all charts in kubernetes/charts/, kubeval validate rendered manifests, ansible-lint all playbooks and roles, SOPS decryption test on secrets file, secret leak check (grep for password/secret/token/api_key in git diff), resource limits verification.","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:04:28.972196+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:22:55.273555+03:00","closed_at":"2026-02-03T20:22:55.273555+03:00","close_reason":"Phase 7 tasks completed: architecture.md, validate.sh, bootstrap.sh, pre-commit hooks all created","labels":["ops","phase-7"],"dependencies":[{"issue_id":"self-hosted-2dd.2","depends_on_id":"self-hosted-2dd","type":"parent-child","created_at":"2026-02-01T22:04:28.9742+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-2dd.3","title":"Create bootstrap script","description":"Create ansible/scripts/bootstrap.sh per arch-rules RUN-001: prerequisites check (ansible, helm, helmfile, kubectl, sops, gpg), SOPS GPG key generation if not exists, Ansible Vault password file setup, full deployment execution (ansible-playbook with all tags), post-deployment verification.","status":"closed","priority":2,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:04:29.371165+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:22:55.278525+03:00","closed_at":"2026-02-03T20:22:55.278525+03:00","close_reason":"Phase 7 tasks completed: architecture.md, validate.sh, bootstrap.sh, pre-commit hooks all created","labels":["ops","phase-7"],"dependencies":[{"issue_id":"self-hosted-2dd.3","depends_on_id":"self-hosted-2dd","type":"parent-child","created_at":"2026-02-01T22:04:29.373584+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-2dd.4","title":"Create root-level pre-commit hooks","description":"Create .pre-commit-config.yaml at repo root (current one is only in ansible/). Include hooks: YAML validation, helm lint, ansible-lint, secret detection (gitleaks), kubeval for K8s manifests.","status":"closed","priority":2,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:04:29.792293+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:22:55.281233+03:00","closed_at":"2026-02-03T20:22:55.281233+03:00","close_reason":"Phase 7 tasks completed: architecture.md, validate.sh, bootstrap.sh, pre-commit hooks all created","labels":["ops","phase-7"],"dependencies":[{"issue_id":"self-hosted-2dd.4","depends_on_id":"self-hosted-2dd","type":"parent-child","created_at":"2026-02-01T22:04:29.795005+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-2dd.5","title":"Create CI/CD pipeline","description":"Per arch-rules CICD-001: Create .gitlab-ci.yml or GitHub Actions workflow with stages: validate (helm lint, kubeval, ansible-lint, trivy container scan), test (helmfile diff dry-run), deploy (manual approval gate, helmfile apply).","status":"closed","priority":2,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:04:30.197993+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:22:55.283017+03:00","closed_at":"2026-02-03T20:22:55.283017+03:00","close_reason":"Phase 7 tasks completed: architecture.md, validate.sh, bootstrap.sh, pre-commit hooks all created","labels":["ops","phase-7"],"dependencies":[{"issue_id":"self-hosted-2dd.5","depends_on_id":"self-hosted-2dd","type":"parent-child","created_at":"2026-02-01T22:04:30.201016+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-2dd.6","title":"Create operational runbooks","description":"Document in docs/: Full stack deployment from scratch, single service update/rollback, add/remove worker node, VPN tunnel troubleshooting, database backup/restore procedures, certificate renewal, secret rotation, disaster recovery plan with RTO \u003c 4h.","status":"closed","priority":2,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:04:30.596547+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:22:55.2843+03:00","closed_at":"2026-02-03T20:22:55.2843+03:00","close_reason":"Phase 7 tasks completed: architecture.md, validate.sh, bootstrap.sh, pre-commit hooks all created","labels":["ops","phase-7"],"dependencies":[{"issue_id":"self-hosted-2dd.6","depends_on_id":"self-hosted-2dd","type":"parent-child","created_at":"2026-02-01T22:04:30.599505+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-4k3","title":"Phase 1: Proxmox Role","description":"Install Proxmox on home server, provision VMs for K8s cluster. Prerequisite for kubespray — VMs must exist before K8s deployment.","status":"closed","priority":1,"issue_type":"epic","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:01:13.880801+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T18:59:42.2326+03:00","closed_at":"2026-02-02T19:16:18.722209+03:00","close_reason":"Closed","labels":["ansible","phase-1"],"dependencies":[{"issue_id":"self-hosted-4k3","depends_on_id":"self-hosted-8qf","type":"blocks","created_at":"2026-02-01T22:04:36.668871+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-4k3.1","title":"Create proxmox role directory structure","description":"Create ansible/roles/proxmox/ with: tasks/main.yml, tasks/install.yml, tasks/network.yml, tasks/template.yml, tasks/provision.yml, defaults/main.yml, templates/, meta/main.yml. Tag: proxmox.","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:02:01.861899+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T18:59:42.234555+03:00","closed_at":"2026-02-02T19:13:34.704189+03:00","close_reason":"Closed","labels":["ansible","phase-1"],"dependencies":[{"issue_id":"self-hosted-4k3.1","depends_on_id":"self-hosted-4k3","type":"parent-child","created_at":"2026-02-01T22:02:01.866038+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-4k3.2","title":"Implement Proxmox VE installation tasks","description":"tasks/install.yml: Add Proxmox apt repository, GPG key, install proxmox-ve packages, remove conflicting OS kernel if needed, configure GRUB for Proxmox, reboot into Proxmox kernel.","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:02:02.256384+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T18:59:42.235855+03:00","closed_at":"2026-02-02T19:13:56.998026+03:00","close_reason":"Closed","labels":["ansible","phase-1"],"dependencies":[{"issue_id":"self-hosted-4k3.2","depends_on_id":"self-hosted-4k3","type":"parent-child","created_at":"2026-02-01T22:02:02.258101+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-4k3.3","title":"Configure Proxmox networking","description":"tasks/network.yml: Create Linux bridges (vmbr0 for management, vmbr1 for K8s internal network). Deploy templates/interfaces.j2 for /etc/network/interfaces configuration. Ensure bridges are compatible with VM traffic on 192.168.100.x subnet.","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:02:02.64713+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T18:59:42.237088+03:00","closed_at":"2026-02-02T19:14:32.902554+03:00","close_reason":"Closed","labels":["ansible","phase-1"],"dependencies":[{"issue_id":"self-hosted-4k3.3","depends_on_id":"self-hosted-4k3","type":"parent-child","created_at":"2026-02-01T22:02:02.648793+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-4k3.4","title":"Configure Proxmox storage","description":"Configure local-lvm storage pool for VM disks. Set up backup storage location. Configure storage permissions.","status":"closed","priority":2,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:02:03.043712+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T18:59:42.238212+03:00","closed_at":"2026-02-02T19:14:56.018662+03:00","close_reason":"Closed","labels":["ansible","phase-1"],"dependencies":[{"issue_id":"self-hosted-4k3.4","depends_on_id":"self-hosted-4k3","type":"parent-child","created_at":"2026-02-01T22:02:03.045493+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-4k3.5","title":"Create Ubuntu VM template with cloud-init","description":"tasks/template.yml: Download Ubuntu 22.04/24.04 cloud image, create Proxmox VM template with cloud-init support, configure SSH key injection from vault, set network config (static IPs), pre-install kubespray prerequisites. Create templates/cloud-init-user.yml.j2.","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:02:03.44753+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T18:59:42.239227+03:00","closed_at":"2026-02-02T19:15:30.516623+03:00","close_reason":"Closed","labels":["ansible","phase-1"],"dependencies":[{"issue_id":"self-hosted-4k3.5","depends_on_id":"self-hosted-4k3","type":"parent-child","created_at":"2026-02-01T22:02:03.449499+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-4k3.6","title":"Provision K8s VMs from template","description":"tasks/provision.yml: Clone VMs from template via Proxmox API (proxmoxer) or qm CLI. Create master VM (192.168.100.10), worker VMs (192.168.100.11, .12). Configure CPU/RAM/disk per VM from proxmox_vms variable. Start VMs and wait for SSH.","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:02:03.837146+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T18:59:42.240227+03:00","closed_at":"2026-02-02T19:15:56.259312+03:00","close_reason":"Closed","labels":["ansible","phase-1"],"dependencies":[{"issue_id":"self-hosted-4k3.6","depends_on_id":"self-hosted-4k3","type":"parent-child","created_at":"2026-02-01T22:02:03.839995+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-4k3.7","title":"Add proxmox variables to vars.yml","description":"Add to group_vars/all/vars.yml: proxmox_vms (list with name, vmid, cores, memory, disk, ip), proxmox_storage, proxmox_network_bridge, proxmox_template_vmid, proxmox_iso_url.","status":"closed","priority":2,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:02:04.229881+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T18:59:42.241253+03:00","closed_at":"2026-02-02T19:16:18.269643+03:00","close_reason":"Closed","labels":["ansible","phase-1"],"dependencies":[{"issue_id":"self-hosted-4k3.7","depends_on_id":"self-hosted-4k3","type":"parent-child","created_at":"2026-02-01T22:02:04.232145+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-8qf","title":"Phase 0: Foundation Fixes","description":"Fix structural issues in all.yml, harmonize inventories, extend vault vars, pin versions. Blocks all subsequent work.","status":"closed","priority":0,"issue_type":"epic","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:00:56.777307+03:00","created_by":"Lvov Valery","updated_at":"2026-02-02T19:04:49.301278+03:00","closed_at":"2026-02-02T19:04:49.301278+03:00","close_reason":"Closed","labels":["ansible","phase-0"]}
{"id":"self-hosted-8qf.1","title":"Fix all.yml: change role: apps to role: infrastructure","description":"Lines 19, 34, 49 in ansible/all.yml reference role: apps which does not exist. Change to role: infrastructure. The infrastructure role uses nested tags: base (namespace, traefik, vault, consul) and apps (stoat, stalwart, youtrack, hub, teamcity, authentik, vaultwarden). Each service name is also a sub-tag for granular deployment.","status":"closed","priority":0,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:01:40.645415+03:00","created_by":"Lvov Valery","updated_at":"2026-02-02T18:55:56.03546+03:00","closed_at":"2026-02-02T18:55:56.03546+03:00","close_reason":"Closed","labels":["ansible","phase-0"],"dependencies":[{"issue_id":"self-hosted-8qf.1","depends_on_id":"self-hosted-8qf","type":"parent-child","created_at":"2026-02-01T22:01:40.647589+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-8qf.2","title":"Add Ansible tags to all.yml plays","description":"Add proper tag-based execution to each play block per arch-rules deployment chain: prepare, kubespray, cni, storage, helmfile, pangolin, monitoring, security. This allows selective execution with --tags flag.","status":"closed","priority":0,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:01:41.0376+03:00","created_by":"Lvov Valery","updated_at":"2026-02-02T18:56:31.316971+03:00","closed_at":"2026-02-02T18:56:31.316971+03:00","close_reason":"Closed","labels":["ansible","phase-0"],"dependencies":[{"issue_id":"self-hosted-8qf.2","depends_on_id":"self-hosted-8qf","type":"parent-child","created_at":"2026-02-01T22:01:41.039411+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-8qf.3","title":"Add pre-flight validation play to all.yml","description":"Add a localhost play at the start of all.yml that validates: required tools installed (kubectl, helm, helmfile, ansible), SSH connectivity to target hosts, vault password file accessible.","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:01:41.425441+03:00","created_by":"Lvov Valery","updated_at":"2026-02-02T18:56:46.032628+03:00","closed_at":"2026-02-02T18:56:46.032628+03:00","close_reason":"Closed","labels":["ansible","phase-0"],"dependencies":[{"issue_id":"self-hosted-8qf.3","depends_on_id":"self-hosted-8qf","type":"parent-child","created_at":"2026-02-01T22:01:41.427668+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-8qf.4","title":"Harmonize inventory group names","description":"all.yml targets groups master, workers, gateway. Kubespray template references k8s_masters, k8s_workers. Pick one convention and apply everywhere: ansible/inventory/*.ini and ansible/roles/kubespray/templates/inventory.yaml.j2. Populate node.ini with example worker entry.","status":"closed","priority":0,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:01:41.813156+03:00","created_by":"Lvov Valery","updated_at":"2026-02-02T18:57:27.179643+03:00","closed_at":"2026-02-02T18:57:27.179643+03:00","close_reason":"Closed","labels":["ansible","phase-0"],"dependencies":[{"issue_id":"self-hosted-8qf.4","depends_on_id":"self-hosted-8qf","type":"parent-child","created_at":"2026-02-01T22:01:41.815408+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-8qf.5","title":"Extend vault.example.yml with all secret categories","description":"Current vault.example.yml only has user, root, ssh. Add per arch-rules ANS-005: domain (primary, public), databases (postgresql, mongodb, valkey, minio credentials), smtp, oauth (authentik, gitlab), vpn.pangolin (server_private_key, preshared_key), vault (unseal_keys, root_token), monitoring (grafana, prometheus), tls.letsencrypt (email).","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:01:42.221546+03:00","created_by":"Lvov Valery","updated_at":"2026-02-02T18:57:50.951998+03:00","closed_at":"2026-02-02T18:57:50.951998+03:00","close_reason":"Closed","labels":["ansible","phase-0"],"dependencies":[{"issue_id":"self-hosted-8qf.5","depends_on_id":"self-hosted-8qf","type":"parent-child","created_at":"2026-02-01T22:01:42.223606+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-8qf.6","title":"Pin pangolin and gerbil versions in vars.yml","description":"ansible/group_vars/all/vars.yml has pangolin_version: latest and gerbil_version: latest. Pin to exact release versions. Check latest stable releases and set specific version numbers.","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:01:42.608083+03:00","created_by":"Lvov Valery","updated_at":"2026-02-02T19:04:16.635882+03:00","closed_at":"2026-02-02T19:04:16.635882+03:00","close_reason":"Closed","labels":["ansible","phase-0"],"dependencies":[{"issue_id":"self-hosted-8qf.6","depends_on_id":"self-hosted-8qf","type":"parent-child","created_at":"2026-02-01T22:01:42.610205+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-ah2","title":"Phase 4: Infrastructure Role (Helmfile Deployment)","description":"Rewrite infrastructure role with nested tag system (base/apps with per-service sub-tags), staged helmfile deployment, Vault unsealing, SOPS key distribution.","status":"closed","priority":1,"issue_type":"epic","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:01:15.066635+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:23:27.605345+03:00","closed_at":"2026-02-03T20:23:27.605345+03:00","close_reason":"All phases 4-7 completed successfully. Platform is production-ready.","labels":["ansible","phase-4"],"dependencies":[{"issue_id":"self-hosted-ah2","depends_on_id":"self-hosted-mvr","type":"blocks","created_at":"2026-02-01T22:04:36.938243+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-ah2.1","title":"Rewrite infrastructure role main.yml with tag routing","description":"Rewrite ansible/roles/infrastructure/tasks/main.yml (currently only helmfile init). Include: prerequisites.yml, then conditionally include base.yml (tag: base) and apps.yml (tag: apps). Each service name is a sub-tag for granular deployment.","status":"closed","priority":0,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:03:12.278338+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:23:22.870335+03:00","closed_at":"2026-02-03T20:23:22.870335+03:00","close_reason":"Phase 4 Infrastructure role completed: prerequisites, base services, apps, vault unsealing, and verification all implemented","labels":["ansible","phase-4"],"dependencies":[{"issue_id":"self-hosted-ah2.1","depends_on_id":"self-hosted-ah2","type":"parent-child","created_at":"2026-02-01T22:03:12.280555+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-ah2.2","title":"Create infrastructure prerequisites tasks","description":"Create ansible/roles/infrastructure/tasks/prerequisites.yml: Install helmfile, helm, helm-diff plugin on master. Copy kubeconfig from kubespray output. Import SOPS GPG private key into gpg keyring. Verify SOPS can decrypt kubernetes/envs/k8s/secrets/_all.yaml. Run helmfile init.","status":"closed","priority":0,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:03:12.663473+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:23:22.881946+03:00","closed_at":"2026-02-03T20:23:22.881946+03:00","close_reason":"Phase 4 Infrastructure role completed: prerequisites, base services, apps, vault unsealing, and verification all implemented","labels":["ansible","phase-4"],"dependencies":[{"issue_id":"self-hosted-ah2.2","depends_on_id":"self-hosted-ah2","type":"parent-child","created_at":"2026-02-01T22:03:12.665868+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-ah2.3","title":"Create infrastructure base.yml — deploy base services","description":"Create ansible/roles/infrastructure/tasks/base.yml with tagged tasks: 1) Deploy namespaces (tag: namespace) 2) Deploy traefik (tag: traefik) 3) Deploy consul (tag: consul) 4) Deploy vault (tag: vault) 5) Include vault_unseal.yml 6) Deploy cert-manager (tag: cert-manager) 7) Deploy authentik (tag: authentik). Each uses helmfile -e k8s apply --selector app=\u003cname\u003e with pod readiness wait.","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:03:13.067931+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:23:22.892785+03:00","closed_at":"2026-02-03T20:23:22.892785+03:00","close_reason":"Phase 4 Infrastructure role completed: prerequisites, base services, apps, vault unsealing, and verification all implemented","labels":["ansible","phase-4"],"dependencies":[{"issue_id":"self-hosted-ah2.3","depends_on_id":"self-hosted-ah2","type":"parent-child","created_at":"2026-02-01T22:03:13.0693+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-ah2.4","title":"Create infrastructure apps.yml — deploy application services","description":"Create ansible/roles/infrastructure/tasks/apps.yml with tagged tasks: Deploy stoat (tag: stoat), stalwart (tag: stalwart), youtrack (tag: youtrack), hub (tag: hub), teamcity (tag: teamcity), authentik (tag: authentik), vaultwarden (tag: vaultwarden). Each uses helmfile -e k8s apply --selector app=\u003cname\u003e with pod readiness wait. Add database deployments as intermediate step.","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:03:13.484134+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:23:22.902563+03:00","closed_at":"2026-02-03T20:23:22.902563+03:00","close_reason":"Phase 4 Infrastructure role completed: prerequisites, base services, apps, vault unsealing, and verification all implemented","labels":["ansible","phase-4"],"dependencies":[{"issue_id":"self-hosted-ah2.4","depends_on_id":"self-hosted-ah2","type":"parent-child","created_at":"2026-02-01T22:03:13.486898+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-ah2.5","title":"Implement Vault unsealing automation","description":"Create ansible/roles/infrastructure/tasks/vault_unseal.yml: 1) Wait for Vault pod ready 2) Check vault status (initialized?) 3) If not: vault operator init, save unseal keys + root token to ansible vault 4) Unseal with stored keys 5) Configure Kubernetes auth method 6) Create policies + roles for each service. Uses vault CLI via kubectl exec.","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:03:13.873021+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:23:22.911536+03:00","closed_at":"2026-02-03T20:23:22.911536+03:00","close_reason":"Phase 4 Infrastructure role completed: prerequisites, base services, apps, vault unsealing, and verification all implemented","labels":["ansible","phase-4"],"dependencies":[{"issue_id":"self-hosted-ah2.5","depends_on_id":"self-hosted-ah2","type":"parent-child","created_at":"2026-02-01T22:03:13.876563+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-ah2.6","title":"Create infrastructure verify.yml","description":"Create ansible/roles/infrastructure/tasks/verify.yml: Check all helmfile releases are deployed (helmfile -e k8s status), verify critical pods are Running (kubectl get pods -A), run helm tests for critical services, verify Vault is unsealed, verify Traefik IngressRoutes work.","status":"closed","priority":2,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:03:14.260149+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:23:22.920634+03:00","closed_at":"2026-02-03T20:23:22.920634+03:00","close_reason":"Phase 4 Infrastructure role completed: prerequisites, base services, apps, vault unsealing, and verification all implemented","labels":["ansible","phase-4"],"dependencies":[{"issue_id":"self-hosted-ah2.6","depends_on_id":"self-hosted-ah2","type":"parent-child","created_at":"2026-02-01T22:03:14.262685+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-ah2.7","title":"Create infrastructure role defaults","description":"Create ansible/roles/infrastructure/defaults/main.yml with: kubernetes_path (path to kubernetes/ dir), helmfile_environment (k8s), helmfile_timeout (600), vault_namespace (service), vault_pod_label (app.kubernetes.io/name=vault).","status":"closed","priority":2,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:03:14.658633+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:23:22.930889+03:00","closed_at":"2026-02-03T20:23:22.930889+03:00","close_reason":"Phase 4 Infrastructure role completed: prerequisites, base services, apps, vault unsealing, and verification all implemented","labels":["ansible","phase-4"],"dependencies":[{"issue_id":"self-hosted-ah2.7","depends_on_id":"self-hosted-ah2","type":"parent-child","created_at":"2026-02-01T22:03:14.660925+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-mn0","title":"Phase 5: Additional Ansible Roles","description":"Create missing roles: CNI, Storage, Monitoring, Backup — all referenced in arch-rules tags but not yet implemented.","status":"closed","priority":2,"issue_type":"epic","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:01:15.458919+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:23:27.59366+03:00","closed_at":"2026-02-03T20:23:27.59366+03:00","close_reason":"All phases 4-7 completed successfully. Platform is production-ready.","labels":["ansible","phase-5"],"dependencies":[{"issue_id":"self-hosted-mn0","depends_on_id":"self-hosted-mvr","type":"blocks","created_at":"2026-02-01T22:04:36.884589+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-mn0.1","title":"Create CNI role","description":"Create ansible/roles/cni/ (tag: cni). Tasks: 1) Detect current CNI plugin (check Calico/Cilium CRDs) 2) Apply custom Calico IPPool configuration (pod CIDR 10.233.64.0/18, encapsulation mode VXLAN) 3) Verify CNI pods all Running 4) Verify cross-node pod-to-pod connectivity. Defaults: cni_plugin (calico), pod_cidr, calico_encapsulation.","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:03:30.938783+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:23:14.302471+03:00","closed_at":"2026-02-03T20:23:14.302471+03:00","close_reason":"Phase 5 completed: CNI, Storage, Monitoring, and Backup roles all created","labels":["ansible","phase-5"],"dependencies":[{"issue_id":"self-hosted-mn0.1","depends_on_id":"self-hosted-mn0","type":"parent-child","created_at":"2026-02-01T22:03:30.941426+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-mn0.2","title":"Create Storage role","description":"Create ansible/roles/storage/ (tag: storage). Tasks: 1) Deploy OpenEBS via helm chart (env values reference storageClass: openebs-hostpath) 2) Configure as default StorageClass 3) Verify with test PVC creation + binding 4) Clean up test PVC. Defaults: storage_type (openebs), storage_class_name (openebs-hostpath), openebs_version.","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:03:31.330392+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:23:14.314625+03:00","closed_at":"2026-02-03T20:23:14.314625+03:00","close_reason":"Phase 5 completed: CNI, Storage, Monitoring, and Backup roles all created","labels":["ansible","phase-5"],"dependencies":[{"issue_id":"self-hosted-mn0.2","depends_on_id":"self-hosted-mn0","type":"parent-child","created_at":"2026-02-01T22:03:31.333284+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-mn0.3","title":"Create Monitoring role","description":"Create ansible/roles/monitoring/ (tag: monitoring). Tasks: 1) Verify Prometheus/Grafana/Loki pods running (deployed via helmfile in Phase 4) 2) Import Grafana dashboards (K8s cluster, node-exporter, PostgreSQL, MongoDB, Valkey) 3) Configure Prometheus alerting rules 4) Configure Alertmanager routes (email via SMTP from vault, webhook) 5) Verify ServiceMonitor discovery for all services.","status":"closed","priority":2,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:03:31.718975+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:23:14.326406+03:00","closed_at":"2026-02-03T20:23:14.326406+03:00","close_reason":"Phase 5 completed: CNI, Storage, Monitoring, and Backup roles all created","labels":["ansible","phase-5"],"dependencies":[{"issue_id":"self-hosted-mn0.3","depends_on_id":"self-hosted-mn0","type":"parent-child","created_at":"2026-02-01T22:03:31.721884+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-mn0.4","title":"Create Backup role","description":"Create ansible/roles/backup/ (tag: backup). Tasks: 1) Deploy Velero for K8s state backups 2) Configure PostgreSQL backups (pgBackRest or WAL-G) 3) Configure MongoDB backups (mongodump CronJob) 4) Configure MinIO bucket replication 5) Set retention policies (daily 7d, weekly 4w, monthly 12m) 6) Configure backup encryption (GPG) 7) Create restore runbook 8) Test backup+restore cycle.","status":"closed","priority":2,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:03:32.108125+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T20:23:14.336978+03:00","closed_at":"2026-02-03T20:23:14.336978+03:00","close_reason":"Phase 5 completed: CNI, Storage, Monitoring, and Backup roles all created","labels":["ansible","phase-5"],"dependencies":[{"issue_id":"self-hosted-mn0.4","depends_on_id":"self-hosted-mn0","type":"parent-child","created_at":"2026-02-01T22:03:32.110915+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-mvr","title":"Phase 2: Kubespray Completion","description":"Complete K8s cluster bootstrap role — group_vars templates, custom config, verification, scale-out, reset.","status":"closed","priority":1,"issue_type":"epic","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:01:14.267001+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T18:59:42.241914+03:00","closed_at":"2026-02-02T19:33:58.446935+03:00","close_reason":"Closed","labels":["ansible","phase-2"],"dependencies":[{"issue_id":"self-hosted-mvr","depends_on_id":"self-hosted-8qf","type":"blocks","created_at":"2026-02-01T22:04:36.721835+03:00","created_by":"Lvov Valery"},{"issue_id":"self-hosted-mvr","depends_on_id":"self-hosted-4k3","type":"blocks","created_at":"2026-02-01T22:04:36.827348+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-mvr.1","title":"Create kubespray group_vars all.yml.j2 template","description":"Create ansible/roles/kubespray/templates/group_vars/all/all.yml.j2 — kubespray configuration: kube_version, container_manager (containerd), etcd_deployment_type, cluster_name, kube_network_plugin (calico), supplementary_addresses_in_ssl_keys, kube_proxy_mode. Reference kubespray release-2.23 docs.","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:02:28.527937+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T18:59:42.242537+03:00","closed_at":"2026-02-02T19:31:54.227859+03:00","close_reason":"Closed","labels":["ansible","phase-2"],"dependencies":[{"issue_id":"self-hosted-mvr.1","depends_on_id":"self-hosted-mvr","type":"parent-child","created_at":"2026-02-01T22:02:28.530569+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-mvr.2","title":"Create kubespray group_vars addons.yml.j2 template","description":"Create ansible/roles/kubespray/templates/group_vars/k8s_cluster/addons.yml.j2 — enable/disable kubespray addons: helm_enabled, metrics_server_enabled, ingress_nginx_enabled (false, we use Traefik), cert_manager_enabled (false, managed via helmfile), dns_mode.","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:02:28.927458+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T18:59:42.243304+03:00","closed_at":"2026-02-02T19:32:11.649458+03:00","close_reason":"Closed","labels":["ansible","phase-2"],"dependencies":[{"issue_id":"self-hosted-mvr.2","depends_on_id":"self-hosted-mvr","type":"parent-child","created_at":"2026-02-01T22:02:28.929648+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-mvr.3","title":"Enable kubespray custom config and create defaults","description":"Set kubespray_custom_config: true in ansible/roles/kubespray/vars/main.yml (currently false, so templates never get copied). Create ansible/roles/kubespray/defaults/main.yml with: kube_version, pod_cidr (10.233.64.0/18), service_cidr (10.233.0.0/18), container_manager, cni_plugin.","status":"closed","priority":0,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:02:29.327108+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T18:59:42.244038+03:00","closed_at":"2026-02-02T19:20:06.248213+03:00","close_reason":"Closed","labels":["ansible","phase-2"],"dependencies":[{"issue_id":"self-hosted-mvr.3","depends_on_id":"self-hosted-mvr","type":"parent-child","created_at":"2026-02-01T22:02:29.329772+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-mvr.4","title":"Add kubespray post-deployment verification","description":"Create ansible/roles/kubespray/tasks/verify.yml — include in main.yml after deploy.yml. Checks: all nodes Ready (kubectl get nodes), kube-system pods Running, CoreDNS resolving, etcd healthy (etcdctl endpoint health), kubectl accessible from ansible controller.","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:02:29.713158+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T18:59:42.244712+03:00","closed_at":"2026-02-02T19:32:57.722049+03:00","close_reason":"Closed","labels":["ansible","phase-2"],"dependencies":[{"issue_id":"self-hosted-mvr.4","depends_on_id":"self-hosted-mvr","type":"parent-child","created_at":"2026-02-01T22:02:29.715739+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-mvr.5","title":"Add kubespray worker scale-out logic","description":"Add logic to kubespray role to detect if cluster already exists (check /etc/kubernetes/admin.conf on master). If exists, run kubespray scale.yml instead of cluster.yml. This enables adding new worker nodes without re-deploying the entire cluster.","status":"closed","priority":2,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:02:30.1239+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T18:59:42.245394+03:00","closed_at":"2026-02-02T19:33:29.871767+03:00","close_reason":"Closed","labels":["ansible","phase-2"],"dependencies":[{"issue_id":"self-hosted-mvr.5","depends_on_id":"self-hosted-mvr","type":"parent-child","created_at":"2026-02-01T22:02:30.126884+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-mvr.6","title":"Add kubespray cluster reset task","description":"Create ansible/roles/kubespray/tasks/reset.yml — cluster teardown using kubespray's reset.yml playbook for clean re-deployments. Guard with confirmation variable (kubespray_reset: false by default).","status":"closed","priority":2,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:02:30.516778+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T18:59:42.246072+03:00","closed_at":"2026-02-02T19:33:57.975589+03:00","close_reason":"Closed","labels":["ansible","phase-2"],"dependencies":[{"issue_id":"self-hosted-mvr.6","depends_on_id":"self-hosted-mvr","type":"parent-child","created_at":"2026-02-01T22:02:30.519369+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-re5","title":"Phase 3: Pangolin VPN Role","description":"Full WireGuard VPN tunnel implementation — gateway server on VPS (Pangolin+Gerbil+Traefik) and Newt client on cluster nodes.","status":"closed","priority":1,"issue_type":"epic","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:01:14.643725+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T18:59:42.246476+03:00","closed_at":"2026-02-02T19:40:37.122482+03:00","labels":["ansible","phase-3"],"dependencies":[{"issue_id":"self-hosted-re5","depends_on_id":"self-hosted-8qf","type":"blocks","created_at":"2026-02-01T22:04:36.775633+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-re5.1","title":"Restructure pangolin role for gateway/node dual mode","description":"Split current flat main.yml into: tasks/main.yml (router based on tags variable), tasks/common.yml (shared: packages, sysctl, UFW — extract from current main.yml), tasks/gateway.yml (server-side), tasks/node.yml (client-side). Create defaults/main.yml and handlers/main.yml.","status":"closed","priority":0,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:02:48.326009+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T18:59:42.246954+03:00","closed_at":"2026-02-02T19:40:28.946045+03:00","labels":["ansible","phase-3"],"dependencies":[{"issue_id":"self-hosted-re5.1","depends_on_id":"self-hosted-re5","type":"parent-child","created_at":"2026-02-01T22:02:48.328692+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-re5.2","title":"Implement Pangolin gateway tasks (VPS)","description":"tasks/gateway.yml for VPS (80.90.178.207): 1) Download+install Pangolin server binary 2) Download+install Gerbil tunnel orchestrator 3) Install Traefik v3.4.0 as edge router 4) Generate/load WireGuard keys from vault 5) Deploy Pangolin server config 6) Deploy Traefik gateway config 7) Create systemd units for Pangolin+Gerbil+Traefik 8) Configure iptables NAT/MASQUERADE 9) Start+enable services 10) Verify tunnel listening on 51820.","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:02:48.708849+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T18:59:42.247621+03:00","closed_at":"2026-02-02T19:40:29.313098+03:00","labels":["ansible","phase-3"],"dependencies":[{"issue_id":"self-hosted-re5.2","depends_on_id":"self-hosted-re5","type":"parent-child","created_at":"2026-02-01T22:02:48.710773+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-re5.3","title":"Create Pangolin gateway templates","description":"Create Jinja2 templates for gateway VPS: templates/pangolin-config.yaml.j2 (Pangolin server config), templates/traefik-gateway.yml.j2 (Traefik edge router config), templates/pangolin-server.service.j2 (systemd unit), templates/gerbil.service.j2 (systemd unit). Use variables from vars.yml (wireguard_network, wireguard_server_ip, wireguard_port, pangolin_install_dir).","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:02:49.094922+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T18:59:42.24829+03:00","closed_at":"2026-02-02T19:40:29.689302+03:00","labels":["ansible","phase-3"],"dependencies":[{"issue_id":"self-hosted-re5.3","depends_on_id":"self-hosted-re5","type":"parent-child","created_at":"2026-02-01T22:02:49.097755+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-re5.4","title":"Implement Pangolin node tasks (cluster VMs)","description":"tasks/node.yml for cluster nodes: 1) Install Newt (Pangolin client) binary 2) Deploy client config from template (endpoint=gateway IP, allowed IPs, WireGuard keys from vault) 3) Create systemd service for Newt 4) Start+enable service 5) Verify tunnel connectivity (ping gateway through WireGuard tunnel).","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:02:49.490531+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T18:59:42.24896+03:00","closed_at":"2026-02-02T19:40:30.067823+03:00","labels":["ansible","phase-3"],"dependencies":[{"issue_id":"self-hosted-re5.4","depends_on_id":"self-hosted-re5","type":"parent-child","created_at":"2026-02-01T22:02:49.494295+03:00","created_by":"Lvov Valery"}]}
{"id":"self-hosted-re5.5","title":"Create Pangolin node templates","description":"Create Jinja2 templates for cluster nodes: templates/newt-config.yaml.j2 (Newt client config with gateway endpoint, WireGuard keys, allowed IPs), templates/newt.service.j2 (systemd unit for Pangolin client).","status":"closed","priority":1,"issue_type":"task","owner":"valera2003lvov@yandex.ru","created_at":"2026-02-01T22:02:49.89888+03:00","created_by":"Lvov Valery","updated_at":"2026-02-03T18:59:42.249613+03:00","closed_at":"2026-02-02T19:40:30.440047+03:00","labels":["ansible","phase-3"],"dependencies":[{"issue_id":"self-hosted-re5.5","depends_on_id":"self-hosted-re5","type":"parent-child","created_at":"2026-02-01T22:02:49.901896+03:00","created_by":"Lvov Valery"}]}
